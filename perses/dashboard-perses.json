{"kind":"Dashboard","metadata":{"name":"policydashboard","createdAt":"2025-05-15T05:36:49.071030602Z","updatedAt":"2025-05-15T05:36:49.071030602Z","version":0,"project":"filtered"},"spec":{"display":{"name":"Policy Dashboard"},"panels":{"Policychecklatency":{"kind":"Panel","spec":{"display":{"name":"Policy check latency"},"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"areaOpacity":0.3,"connectNulls":false,"lineWidth":1.25,"pointRadius":2.75},"yAxis":{"format":{"unit":"milliseconds"},"label":"","show":true}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"histogram_quantile(0.95, sum(rate(requests_latency_seconds_bucket{downstream=\"\"}[1m])) by (le) > 0)","seriesNameFormat":"latency"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"histogram_quantile(0.95, sum(rate(requests_latency_seconds_bucket{upstream=\"\"}[1m])) by (le) > 0)","datasource":{"kind":"PrometheusDatasource","name":"internal"}}}}}]}},"Requestsprocessedmin":{"kind":"Panel","spec":{"display":{"name":"Requests processed min"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"table","position":"bottom","values":["mean"]},"visual":{"areaOpacity":0.3,"connectNulls":false,"lineWidth":1.25,"pointRadius":2.75}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum by (tenant) (irate(grpc_requests_total{job=\"prompolicy/prompolicy\"}[1m]))","seriesNameFormat":"grpc/{{tenant}}"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum by (tenant) (irate(http_requests_total{job=\"prompolicy/prompolicy\"}[1m]))","seriesNameFormat":"http/{{tenant}}"}}}}]}},"Violations":{"kind":"Panel","spec":{"display":{"name":"Violations"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"table","position":"bottom","values":["mean"]},"visual":{"areaOpacity":0.3,"connectNulls":false,"lineWidth":1.25,"pointRadius":2.75}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum by (tenant, kind) (rate(violations_total{}[1m]))","seriesNameFormat":"{{tenant}}/{{kind}}"}}}}]}},"sumprocessedmin":{"kind":"Panel","spec":{"display":{"name":"sum processed min"},"plugin":{"kind":"TimeSeriesChart","spec":{}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum (irate(grpc_requests_total{job=\"prompolicy/prompolicy\"}[1m]))"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum (irate(http_requests_total{job=\"prompolicy/prompolicy\"}[1m]))"}}}}]}},"totalprocessed":{"kind":"Panel","spec":{"display":{"name":"total processed"},"plugin":{"kind":"StatChart","spec":{"calculation":"max","format":{"unit":"decimal"},"sparkline":{}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum (grpc_requests_total{job=\"prompolicy/prompolicy\"})","seriesNameFormat":"grpc"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"sum (http_requests_total{job=\"prompolicy/prompolicy\"})","seriesNameFormat":"http"}}}}]}},"Policychecklatency-1":{"kind":"Panel","spec":{"display":{"name":"GRPC latency"},"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"areaOpacity":0.3,"connectNulls":false,"lineWidth":1.25,"pointRadius":2.75,"stack":"all"},"yAxis":{"format":{"unit":"milliseconds"},"label":"","show":true}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"internal"},"query":"histogram_quantile(0.95, sum(rate(grpc_latency_seconds_bucket{}[1m])) by (le) > 0)","seriesNameFormat":"latency"}}}}]}}},"layouts":[{"kind":"Grid","spec":{"display":{"title":"Panel Group","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":9,"height":11,"content":{"$ref":"#/spec/panels/Requestsprocessedmin"}},{"x":18,"y":5,"width":4,"height":6,"content":{"$ref":"#/spec/panels/sumprocessedmin"}},{"x":18,"y":0,"width":4,"height":5,"content":{"$ref":"#/spec/panels/totalprocessed"}},{"x":9,"y":0,"width":9,"height":11,"content":{"$ref":"#/spec/panels/Violations"}},{"x":0,"y":11,"width":11,"height":7,"content":{"$ref":"#/spec/panels/Policychecklatency"}},{"x":11,"y":11,"width":11,"height":7,"content":{"$ref":"#/spec/panels/Policychecklatency-1"}}]}}],"variables":[],"duration":"1h","refreshInterval":"0s"}}
